---
layout: post
title: GIT > the ways of undoing
---
## the case	
the question is:instead of going into renaming files as `_old` I would like to commit first and then undo it if I need to revert to the previous version

## toc
<!-- TOC -->

- [git reset HEAD: undo the stage](#git-reset-head-undo-the-stage)
- [git reset --soft HEAD~1: undo the commit, keep the stage](#git-reset---soft-head1-undo-the-commit-keep-the-stage)
- [git reset --hard HEAD~1: undo the commit and stage (files not changed)](#git-reset---hard-head1-undo-the-commit-and-stage-files-not-changed)
- [undo local uncommited changes](#undo-local-uncommited-changes)
- [sources](#sources)

<!-- /TOC -->

## findings

### git reset HEAD: undo the stage

### git reset --soft HEAD~1: undo the commit, keep the stage
* you have staged many files
* you commit them at once from the **INDEX** into **HEAD**
* UNDO just the commit and put it all back to index, you move the **HEAD** to the commit before
* this brings files back to INDEX
* this does not change any files themselves

> scenario: I stage 50 small changes, commit them in bulk and push it to the jekyll pages. The build fails. I need to undo the commit and start analyzing where it went wrong. 

### git reset --hard HEAD~1: undo the commit and stage (files not changed)
* I hit a wrong button in VSCode sometimes and I stage or even commig everything
* Then I need to undo that step in a terminal quickly
* run `git reset --hard HEAD^` 
* If multiple commits from the top, you can run git `reset --hard HEAD~2` to remove the last two commits. 
* You can increase the number to remove even more commits.

### undo local uncommited changes
* If working on something and you just don't want to create `.old`, i.e. you just want to be able to go to the last commit of that file
* At this point there are 3 options to undo the local changes you have:
    1. Discard all local changes, but save them for possible re-use later: `git stash`
    2. Discarding local changes (permanently) to a file: `git checkout -- <file>`
    3. Discard all local changes to all files permanently: `git reset --hard`
* **note:** executing `git reset --hard`, keep in mind that there is also a way to just temporary store the changes without committing them using git stash. This command resets the changes to all files, but it also saves them in case you would like to apply them at some later time. You can read more about it in section below.



### sources
* [Numerous undo possibilities in Git - GitLab](https://docs.gitlab.com/ee/topics/git/numerous_undo_possibilities_in_git/)
*[Git - Undoing Things](https://git-scm.com/book/en/v2/Git-Basics-Undoing-Things)